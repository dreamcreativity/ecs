<script type="text/javascript">
	var url_params = <%- JSON.stringify(url_params) %>
</script>

<div class="row" ng-controller='StudentRegisterDetail'>
	<div class="portlet">
		<div class="portlet-heading dark">
			<div class="portlet-title">
				<h4><strong>Name</strong> : {{student.firstname}} {{student.lastname}} <strong>Student ID</strong> : {{student.studentID}} </h4>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="portlet-body">
			<div class="tc-tabs"><!-- Nav tabs style 1 -->
				<ul class="nav nav-tabs tab-lg-button tab-color-dark background-dark white">
					<li class="active"><a href="#p1" data-toggle="tab"><i class="fa fa-desktop bigger-130"></i>Basic Information</a></li>
					<li><a href="#p2" data-toggle="tab"><i class="fa fa-edit bigger-130"></i>Accommdation</a></li>
					<li><a href="#p3" data-toggle="tab"><i class="fa fa-edit bigger-130"></i>Registration Record</a></li>
				</ul>

				<div class="tab-content">
					<div class="tab-pane fade in portlet-body active" id="p1">
						<form name="studentForm" class="form-horizontal" role="form" ng-submit="update(studentForm.$valid)" novalidate>
							<div class="form-group">
							<label class="label label-xlg label-pending arrowed-right">Student Information</label>
						</div>


						<div class="form-group">
							<label class="col-sm-2  control-label">Reference ID : </label>
							<div class="col-sm-4">
								<input  type="text" class="form-control" name="referenceID" ng-model="student.referenceID" readonly="">
							</div>

							<label class="col-sm-2 control-label">Gender : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<select name="gender" class="form-control" ng-model="student.gender" ng-init="student.gender = 'Male'">
											<option value="Male">Male</option>
											<option value="Female">Female</option> 
										</select>
									</div>
								</div>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label">First Name : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input  type="text" class="form-control" name="firstname" ng-model="student.firstname" required>
										<span ng-show="!registerForm.firstname.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
										<span ng-show="registerForm.firstname.$error.required" class="input-group-addon">Required</span>
									</div>
								</div>
							</div>
							<label class="col-sm-2 control-label">Last Name :  </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input  type="text" class="form-control" name="lastname" ng-model="student.lastname" required>
										<span ng-show="!registerForm.lastname.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
										<span ng-show="registerForm.lastname.$error.required" class="input-group-addon">Required</span>
									</div>
								</div>
							</div>
						</div>


							<div class="form-group">
							
							<label class="col-sm-2 control-label">Birth Date : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type='date' class="form-control" name="birthday" ng-model="student.birthday" required>
										<span ng-show="!registerForm.birthday.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
										<span ng-show="registerForm.birthday.$error.required" class="input-group-addon">Required</span>
									</div>
								</div>
							</div>

							<label class="col-sm-2 control-label">Age : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type="number" class="form-control" name="age" ng-model="student.age" required>
										<span ng-show="registerForm.age.$error.required" class="input-group-addon">Required</span>
										<span ng-show="!registerForm.age.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
									</div>
								</div>
							</div>

						</div>


							<div class="form-group">
								<!-- <label class="col-sm-2 control-label">Commission Rate</label>
								<div class="col-sm-4">
									<div class="input-group">
										<input type="number" step='0.1' min='0' class="form-control" name="commissionRate" ng-model="student.commissionRate">
									</div>
								</div> -->
								<label class="col-sm-2 control-label">Pomotion Rate</label>
								<div class="col-sm-4">
									<div class="input-group">
										<input id="touchspin-demo2" type="number" step='0.1' min='0' class="form-control" name="pomotionRate" ng-model="student.pomotionRate" readonly="">
									</div>
								</div>
							</div>

						<div class="form-group">
							
							<label class="col-sm-2 control-label">Address : </label>
							<div class="col-sm-10">
								<div class="clearfix">
									<div class="input-group">
										<input type='text' class="form-control" name="address" ng-model="student.address" required>
										<span ng-show="!registerForm.address.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
										<span ng-show="registerForm.address.$error.required" class="input-group-addon">Required</span>
									</div>
								</div>
							</div>	
							
						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label">City : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type="text" class="form-control" name="city" ng-model="student.city" required>
										<span ng-show="registerForm.city.$error.required" class="input-group-addon">Required</span>
										<span ng-show="!registerForm.city.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
									</div>
								</div>
							</div>
							<label class="col-sm-2 control-label">Province : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type='text' class="form-control" name="province" ng-model="student.province" required>
										<span ng-show="!registerForm.province.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
										<span ng-show="registerForm.province.$error.required" class="input-group-addon">Required</span>
									</div>
								</div>
							</div>

							
						</div>
						<div class="form-group">
							
							<label class="col-sm-2 control-label">Postal Code : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type="text" class="form-control" name="postcode" ng-model="student.postcode" required>
										<span ng-show="registerForm.postcode.$error.required" class="input-group-addon">Required</span>
										<span ng-show="!registerForm.postcode.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
									</div>
								</div>
							</div>

							<label class="col-sm-2 control-label">Country : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type="text" class="form-control" name="country" ng-model="student.country" required>
										<span ng-show="registerForm.country.$error.required" class="input-group-addon">Required</span>
										<span ng-show="!registerForm.country.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
									</div>
								</div>
							</div>
							
						</div>

	

						<div class="form-group">
							<label class="col-sm-2 control-label">Telephone : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type='text' class="form-control" name="telephone" ng-model="student.telephone" required>
										<span ng-show="!registerForm.telephone.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
										<span ng-show="registerForm.telephone.$error.required" class="input-group-addon">Required</span>
									</div>
								</div>
							</div>
							<label class="col-sm-2 control-label">Emergency call : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type="text" class="form-control" name="emergency" ng-model="student.emergency" required>
										<span ng-show="registerForm.emergency.$error.required" class="input-group-addon">Required</span>
										<span ng-show="!registerForm.emergency.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
									</div>
								</div>
							</div>
						</div>

						<div class="form-group">
							
							<label class="col-sm-2 control-label">Fax : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group" style="width:100%">
										<input type="text" class="form-control" name="fax" ng-model="student.fax">
									</div>
								</div>
							</div>

							<label class="col-sm-2 control-label">Email : </label>
							<div class="col-sm-4">
								<div class="clearfix">
									<div class="input-group">
										<input type='text' class="form-control" name="email" ng-model="student.email" required readonly="">
										<span ng-show="!registerForm.email.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
										<span ng-show="registerForm.email.$error.required" class="input-group-addon">Required</span>
									</div>
								</div>
							</div>
						</div>

						<hr class="separator">

							<div class="form-group">
								<!-- <div class="col-sm-offset-3 col-sm-1">
									<a href="/agent/student/extending/{{student._id}}" type="submit" class="btn btn-primary btn-block">Add course</a>
								</div> -->
								<!-- <div class="col-sm-1">
									<button type="button" download-form01 class="btn btn-primary btn-block" ng-click="download_student()">Download</button>
								</div> -->
								<div class="col-sm-offset-3 col-sm-1">
									<input type="submit" class="btn btn-primary btn-block" value="Update" ng-disabled="studentForm.$invalid">
								</div>
								<div class="col-sm-1">
									<a href="/agent/student/all" type="submit" class="btn btn-default btn-block">Cancel</a>
								</div>
							</div>
						</form>
					</div>

					<div class="tab-pane fade in portlet-body" id="p2">
						<form name="accommdationForm" class="form-horizontal" role="form" ng-show="havingAccommdation" novalidate>
							<div class="form-group ">
								<label class="label label-xlg label-pending arrowed-right">Flight Information : </label>
							</div>

							<div class="form-group">
								<div class="col-sm-5">
									<div class="form-group">
										<label class="heading">Arrival in Toronto</label>
									</div>
									<div class="form-group">
										<label>Date & Time</label>
										<input type="date" class="form-control" name="arrivalDateTime" ng-model="flightInfo.arrivalDateTime">
									</div>
									<div class="form-group">
										<label>Airline & Fligth No.</label>
										<input type="text" class="form-control" name="arrivalAirline" ng-model="flightInfo.arrivalAirline">
									</div>

									<label class="row" >
										<input type="checkbox" class="tc" name="isPickup" ng-model="flightInfo.isPickup"> 
										<span class="labels"> <strong>Airport Pick up Request</strong></span>
									</label>


								
								</div>

								<div class="col-sm-offset-2 col-sm-5">
								
									<div class="form-group">
										<label class="heading">Departure from Toronto</label>
									</div>
									<div class="form-group">
										<label>Date & Time</label>
										<input type="date" class="form-control" name="departureDateTime" ng-model="flightInfo.departureDateTime" >
									</div>
									<div class="form-group">
										<label>Airline & Fligth No.</label>
										<input type="text" class="form-control" name="departureAirline" ng-model="flightInfo.departureAirline" >
									</div>

									<label class="row" >
										<input type="checkbox" class="tc" name="isDropoff" ng-model="flightInfo.isDropoff">
										<span class="labels"> <strong>Airport Drop off Request</strong></span>
									</label>

								</div>
							</div>

							<hr class="separator" />
							<div class="form-group">
								<div class="col-sm-5">
									<!-- <div class="form-group">
										<label class="heading">Arrival in Toronto</label>
									</div> -->
									<div class="form-group">
										<label>Starting Date</label>
											<div class="clearfix">
												<div class="input-group">
													<input type="date" class="form-control" name="startDate" ng-model="accommodation.startDate" required>
													<span ng-show="!accommdationForm.startDate.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
													<span ng-show="accommdationForm.startDate.$error.required" class="input-group-addon">Required</span>	
												</div>
											</div>
									</div>
									<div class="form-group">
										<label>Finishing Date </label>
											<div class="clearfix">
												<div class="input-group">
													<input type="date" class="form-control" name="endDate" ng-model="accommodation.endDate" required>
													<span ng-show="!accommdationForm.endDate.$error.required" class="input-group-addon"><i class="fa fa-check"></i></span>
													<span ng-show="accommdationForm.endDate.$error.required" class="input-group-addon">Required</span>
												</div>
											</div>
									</div>
									<div class="form-group">
										<label>Departure date from Toronto</label>
										<input type="date" class="form-control" name="departDate" ng-model="accommodation.departureDateFromToronto" >
									</div>
									
								
								</div>
							</div>




							<div class="form-group ">
								<label class="label label-xlg label-pending arrowed-right">Please answer the following questions to assist us in finding an appropriate host family for you</label>
							</div>


							

							<div class="form-group">
								<label>
									<input type="checkbox" class="tc" name="isSmoke" ng-model="accommodation.isSmoke">
									<span class="labels"> <strong>Do you smoke ?</strong></span>
								</label>
							</div>

							<div class="form-group">
								<label>
									<input type="checkbox" class="tc" name="isWithSmoke" ng-model="accommodation.isWithSmoke">
									<span class="labels"> <strong>Do you live in a home with smoker ?</strong></span>
								</label>
							</div>

							<div class="form-group">
								<label>
									<input type="checkbox" class="tc" name="isWithPet" ng-model="accommodation.isWithPet">
									<span class="labels"> <strong>Do you live with pet ? </strong></span>
								</label>
							</div>

							<div class="form-group">
								<label>
									<input type="checkbox" class="tc" name="isWithKid" ng-model="accommodation.isWithKid">
									<span class="labels"> <strong>Do you live with small children ? </strong></span>
								</label>					
							</div>


							<div class="form-group">
								<label>What is your hobbies ? </label>
								<textarea class="form-control" name="hobbies" ng-model="accommodation.hobbies"></textarea>
							</div>

							<div class="form-group">
								<label>Peofession(What is your occupation ?) </label>
								<textarea class="form-control" name="occupation" ng-model="accommodation.occupation"></textarea>
							</div>

							<div class="form-group">
								<label>Additional Comments : </label>
						
									<textarea class="form-control" name="comments" ng-model="accommodation.comments"></textarea>
							
							</div>
							<div class="form-group">
								<label>Do you have any special diet or food preference ?</label>
					
									<textarea class="form-control" name="specialFood" ng-model="accommodation.specialFood"></textarea>
						
							</div>
							<div class="form-group">
								<label>Do you have any allergies or medical concerns ?</label>
						
									<textarea class="form-control" name="allergiesMedical" ng-model="accommodation.allergiesMedical"></textarea>
								
							</div>

							<div class="form-group ">
								<label class="label label-xlg label-pending arrowed-right">Extra Options (Please note that an extra charge will apply)</label>
							</div>



							<div class="form-group">
								<label>
									<input type="checkbox" class="tc" name="isPrivateBathroom" ng-model="accommodation.isPrivateBathroom">
									<span class="labels"> <strong>Private Bathroom(Subject to availability)</strong></span>
								</label>
							</div>

							
							<div class="form-group" ng-show="!createAccommdation">
								<div class="col-sm-offset-2 col-sm-1">
									<button type="button" download-form02 class="btn btn-primary btn-block" ng-click="download_accommdation()">Download</button>
								</div>
								<div class="col-sm-1">
									<input type="submit" class="btn btn-primary btn-block" ng-click="submitAccommdation()" value="Update">
								</div>
								<div class="col-sm-1">
									<a href="/admin/student/all" type="submit" class="btn btn-primary btn-block">Cancel</a>

								</div>
							</div>

							<div class="form-group" ng-show="createAccommdation">
								<div class="col-sm-offset-2 col-sm-1">
									<input type="submit" class="btn btn-primary btn-block" ng-click="createNewAccommdation()" value="Create" ng-disabled="accommdationForm.$invalid">
								</div>
								<div class="col-sm-1">
									<a href="#" ng-click="havingAccommdation=false" class="btn btn-primary btn-block">Cancel</a>
								</div>
							</div>

						</form>
						<div class="row">
							<div class="col-sm-1">
								<button class="btn btn-primary btn-block" ng-click="havingAccommdation=true" ng-hide="havingAccommdation">Create</button>
							</div>
						</div>
					</div>

					<!-- Tab 3 -->
					<div class="tab-pane fade" id="p3">
						<div class="portlet" ng-repeat="registration in registrations"><!-- /Portlet -->
							<div class="portlet-heading dark">
								<div class="portlet-title">
									<h4>{{registration.createDate | date:'MMMM d yyyy'}}</h4>
								</div>
								<div class="portlet-widgets">
									<a data-toggle="collapse" data-parent="#accordion" href="#basic"><i class="fa fa-chevron-down"></i></a>
									<span class="divider"></span>
									<a href="/agent/student/commission/{{registration._id}}"><i class="fa fa-search icon-only"></i></a>
								</div>
								<div class="clearfix"></div>
							</div>
							<div id="basic" class="panel-collapse collapse in">
								<div class="portlet-body no-padding">
									<table class="table table-bordered table-hover tc-table">
										<thead>
											<tr>
												<th class="hidden-xs center">Course</th>
												<th class="hidden-xs center">Description</th>
												<th class="hidden-xs center">Level</th>
												<th class="hidden-xs center">Year</th>
												<th class="hidden-xs center">Start Date</th>
												<th class="hidden-xs center">Duration</th>
												<th class="col-medium center">Status</th>
												<th class="col-medium center">Action</th>
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="c in registration.programRegistration">
												<td class="hidden-xs center">{{c.title}}</td>
												<td class="hidden-xs center">{{c.tag}}</td>
												<td class="hidden-xs center">{{c.level}}</td>
												<td class="hidden-xs center">{{c.startDate | date : 'yyyy'}}</td>
												<td class="hidden-xs center">{{c.startDate | date:'MMMM d'}}</td>
												<td class="hidden-xs center">{{c.coursePeriod}}</td>
												<td class="hidden-xs center">
													<span ng-if="c.isDelete == 1" class="label label-danger">Deleted</span>
													<span ng-if="c.isDelete == 0" class="label label-active">Active</span>
												</td>
												<td class="hidden-xs center">
													<div class="btn-group btn-group-xs ">
														<a href="/agent/student/register/edit/{{student._id}}/{{c._id}}" class="btn"><i class="fa fa-pencil icon-only"></i></a>
													</div>					
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<form class="form-horizontal" ng-controller='StudentExtending'>
							<div class="form-group">
							<div class="col-sm-1">
									<!-- <a href="/admin/student/extending/{{student._id}}" type="submit" class="btn btn-primary btn-block" data-parent="#accordion" href="#record">New register</a> -->
									<a data-toggle="collapse" class="btn btn-primary btn-block" data-parent="#accordion" href="#register">New register</a>
								</div>
							</div>
							<div id="register" class="panel-collapse collapse">							
								<div class="portlet">
									<div class="portlet-heading dark">
										<div class="portlet-title">
											<h4>Existing Student ( <strong>Student ID</strong> : {{student.studentID}} )</h4>
										</div>
										<div class="clearfix"></div>
									</div>

									<div class="portlet-body">
											<div class="form-group">
												<label class="col-sm-2 control-label">First Name :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="firstname" ng-model="student.firstname" readonly="">
												</div>
												<label class="col-sm-2 control-label">Last Name :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="lastname" ng-model="student.lastname" readonly="">
												</div>
											</div>

											<div class="form-group">
												<label class="col-sm-2 control-label">Gender :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="gender" ng-model="student.gender" readonly="">
												</div>
												<label class="col-sm-2 control-label">Birthday :</label>
												<div class="col-sm-2">
													<div class="form-control">{{student.birthday | date : 'MMM dd yyyy'}}</div>
												</div>
												<label class="col-sm-1 control-label">Age :</label>
												<div class="col-sm-1">
													<input type="text" class="form-control" name="age" ng-model="student.age" readonly="">
												</div>
											</div>

											<div class="form-group">
												<label class="col-sm-2 control-label">Address :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="address" ng-model="student.address" readonly="">
												</div>
												<label class="col-sm-2 control-label">Postcode :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="postcode" ng-model="student.postcode" readonly="">
												</div>
												<label class="col-sm-1 control-label">City :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="city" ng-model="student.city" readonly="">
												</div>
											</div>

											<div class="form-group">
												<label class="col-sm-2 control-label">Province :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="province" ng-model="student.province" readonly="">
												</div>
												<label class="col-sm-2 control-label">Country :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="country" ng-model="student.country" readonly="">
												</div>
											</div>

											<div class="form-group">
												<label class="col-sm-2 control-label">Telephone :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="telephone" ng-model="student.telephone" readonly="">
												</div>
												<label class="col-sm-2 control-label">Email :</label>
												<div class="col-sm-2">
													<input type="text" class="form-control" name="email" ng-model="student.email" readonly="">
												</div>
											</div>

											<div ng-if="student.agent !=null">
												<div class="form-group">
													<label class="col-sm-2 control-label">Agent :</label>
													<div class="col-sm-2">
														<div class="form-control">{{student.agent.lastname}} {{student.agent.firstname}}</div>
													</div>
													<label class="col-sm-2 control-label">Agent's Company :</label>
													<div class="col-sm-2">
														<div class="form-control">{{student.agent.company}}</div>
													</div>
													<label class="col-sm-1 control-label">Agent's Email :</label>
													<div class="col-sm-2">
														<div class="form-control">{{student.agent.email}}</div>
													</div>
												</div>
											</div>

											<div ng-if="student.agent == null">
												<div class="form-group">
													<label class="col-sm-2 control-label">Agent :</label>
													<div class="col-sm-2">
														<div class="form-control">N/A</div>
													</div>
													<label class="col-sm-2 control-label">Agent's Company :</label>
													<div class="col-sm-2">
														<div class="form-control">N/A</div>
													</div>
													<label class="col-sm-1 control-label">Agent's Email :</label>
													<div class="col-sm-2">
														<div class="form-control">N/A</div>
													</div>
												</div>
											</div>

											<div class="form-group">
												<label class="col-sm-2 control-label">First registration Date :</label>
												<div class="col-sm-2">
													<label class="label label-success">{{ student.registerDate  | date:'MMMM d, yyyy'}}</label>
												</div>
											</div>

											<div course-register></div>

											<div class="form-group">
												<div class="col-sm-1">
													<button type="submit" class="btn btn-primary btn-block" ng-click="extendingCourse()">Submit</button>
												</div>
											</div>		
									</div>		
								</div>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>	
	</div>
</div>

<script>
$(document).on("keypress", "form", function(event) { 
    return event.keyCode != 13;
});
</script>


<!-- core JavaScript -->
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/plugins/bootbox/bootbox.min.js"></script>